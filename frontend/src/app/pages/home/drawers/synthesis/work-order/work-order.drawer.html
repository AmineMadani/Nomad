<ng-template #workOrderTemplate>
  <ng-container *ngIf="workOrder && !editMode">
    <ion-item lines="none" class="ion-text-center">
      <ion-label class="rdv-label">
        {{ workOrder.wko_name }}
      </ion-label>
    </ion-item>
    <ion-item lines="none" class="ion-text-center">
      <ion-label>
        <ion-chip *ngIf="workOrder.wts_id" [ngClass]="'status-nf'" [outline]="false">
          <ion-label>{{ workOrder.labelStatus }}</ion-label>
        </ion-chip>
        <ion-chip *ngIf="workOrder.wko_emergency === 'true'" class="status" [outline]="true">
          <ion-icon name="calendar-outline"></ion-icon>
          <ion-label>Urgent</ion-label>
        </ion-chip>
        <ion-chip *ngIf="workOrder.wko_appointment  === 'true'" class="status" [outline]="false">
          <ion-icon name="calendar-outline"></ion-icon>
          <ion-label>Rendez-vous</ion-label>
        </ion-chip>
      </ion-label>
    </ion-item>
  </ng-container>
  <ng-container *ngIf="workOrder && editMode">
    <div class="edit-title">
      Les champs suivis d'un * sont obligatoires
    </div>
  </ng-container>
  <app-form-editor *ngIf="workOrderForm" [nomadForm]="workOrderForm" [editMode]="editMode"
    (submitAction)="onSubmit($event)" #formEditor></app-form-editor>
</ng-template>

<ng-template #workOrderfooter>
  <div *ngIf="editMode" lines="none" class="footer">
    <ion-button fill="clear" (click)="onCancel()">Annuler</ion-button>
    <ion-button fill="clear" fill="clear" slot="end" type="submit" [form]="workOrderForm?.key" [disabled]="creationDisabled">Transférer à la planification</ion-button>
  </div>
  <ng-container *ngIf="!editMode">
    <ion-item class="item-footer" lines="none">
      <ion-button fill="clear" slot="end">Détails</ion-button>
    </ion-item>
  </ng-container>
</ng-template>

<app-synthesis [drawerTitle]="getTitle()" [hasFile]="true" [tabButtons]="buttons" [contentTemplate]="workOrderTemplate" [sourceLayer]="'workorder'"
  [footerTemplate]="workOrderfooter" (onTabButton)="onTabButtonClicked($event)">
</app-synthesis>