<div class="report-asset">
  <!-- action buttons -->
  <ion-tab-bar class="action-buttons">
    <ion-tab-button *ngIf="workorder.tasks.length === 1 && !inEditMode"
      (click)="onEditEquipment(workorder.tasks[0])">
      <ion-icon name="pencil-outline"></ion-icon>
      Modifier le patrimoine
    </ion-tab-button>
    <ion-tab-button *ngIf="workorder.tasks.length === 1 && inEditMode"
      [class]="draggableMarker ? 'selected' : ''" (click)="onRemoveChangeEquipment(workorder.tasks[0])">
      <ion-icon name="close-outline" color="red"></ion-icon>
      Annuler la modification
    </ion-tab-button>
    <ion-tab-button>
      <ion-icon src="assets/icon/polygonal.svg"></ion-icon>
      Multi-sélection
    </ion-tab-button>
    <ion-tab-button (click)="onNewAsset()">
      <ion-icon name="refresh-outline"></ion-icon>
      Créer un patrimoine
    </ion-tab-button>
    <ion-tab-button *ngIf="hasReportClosed()" class="close-report-button" (click)="onCloseCircuit()">
      <ion-icon name="checkmark-outline"></ion-icon>
      Clôturer le circuit en cours
    </ion-tab-button>
  </ion-tab-bar>


  <div class="asset-list" *ngIf="workorder">
    <ion-item *ngFor="let tsk of workorder.tasks" (mouseenter)="onItemHoverEnter(tsk)"
      (mouseleave)="onItemHoverLeave(tsk)">
      <ion-checkbox aria-label="check" slot="start" mode="md" [indeterminate]="tsk.report?.dateCompletion"
        [checked]="tsk.isSelectedTask" (ionChange)="onSelectTask(tsk)"
        [disabled]="(layerSelected ? (tsk.assObjTable !== layerSelected) : false) || tsk.report?.dateCompletion"></ion-checkbox>
      <div style="display: inline-block;">
        <ion-label>
          <ion-label class="ion-no-margin">
            {{getLyrLabel(tsk.assObjTable)}}
          </ion-label>
          <ion-note slot="helperText">
            {{tsk.assObjRef}}
          </ion-note>
        </ion-label>
      </div>
    </ion-item>
  </div>
</div>

