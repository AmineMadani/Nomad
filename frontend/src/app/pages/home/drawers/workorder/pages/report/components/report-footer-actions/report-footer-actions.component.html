<div [class]="isMobile ? 'report-footer-actions is-mobile' : 'report-footer-actions'" lines="none">
  <ng-container *ngIf="!isSubmitting">
    <ion-button *ngIf="step === 1 && !workorder.wkoPlanningStartDate" fill="clear" style="float: left;"
      (click)="onEditTaskEmit()" [class.font-mobile]="isMobile">Editer les équipements</ion-button>
    <ion-button *ngIf="step === 1 && workorder.wkoPlanningStartDate" fill="clear" style="float: left;"
      (click)="onNewAssetEmit()" [class.font-mobile]="isMobile">Créer un patrimoine</ion-button>
    <ion-button *ngIf="(step >= 2 && !hasPreviousQuestion && !isTest) || step === 4" fill="clear" style="float: left;"
      (click)="onBackEmit()" [disabled]="workorder.isUpdateReport && step != 4" [class.font-mobile]="isMobile">Etape précédente</ion-button>
    <div *ngIf="step >= 2 && !hasPreviousQuestion && isTest"></div>
    <ion-button
      *ngIf="(step === 1 && selectedTasks && selectedTasks.length > 0) || (step === 2 && selectedTasks && selectedTasks.length > 0 && selectedTasks[0].wtrId)"
      fill="clear" style="margin-left: auto;" (click)="onNextEmit()" [class.font-mobile]="isMobile"
      [disabled]="hasXYInvalid">Etape suivante</ion-button>
    <ion-button *ngIf="(step === 3) && hasPreviousQuestion" fill="clear" (click)="onPreviousFormQuestionEmit()"
      [class.font-mobile]="isMobile">Question précédente</ion-button>
    <ion-button *ngIf="step === 3 && !isSubmit" fill="clear" (click)="onNextFormQuestionEmit()"
      [class.font-mobile]="isMobile">Question suivante</ion-button>
    <ion-button *ngIf="step === 4" fill="clear" (click)="onConfirmDateEmit()"
      [class.font-mobile]="isMobile">Valider</ion-button>
    <ion-button *ngIf="isSubmit && !isTest && step !== 4" fill="clear" (click)="onFormSubmitEmit()"
      [class.font-mobile]="isMobile">Clôturer</ion-button>
    <ion-fab *ngIf="(step === 1 && hasReportClosed)" class="fab-terminate">
      <ion-fab-button color="danger" (click)="onFormSubmitEmit(true)">
        <ion-icon name="close-outline"></ion-icon>
      </ion-fab-button>
      <div *ngIf="!isMobile" class="fab-terminate-text">
        Clôturer circuit
      </div>
    </ion-fab>
    <ion-fab *ngIf="(step === 3 && !isSubmitting && !this.isTest && !workorder.isUpdateReport)" (click)="onGoToFirstStepEmit()" [class]="isMobile ? 'fab-return is-mobile' : 'fab-return'">
      <ion-fab-button color="secondary" size="small">
        <ion-icon name="arrow-undo-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </ng-container>
  <ng-container *ngIf="isSubmitting">
    <ion-item lines="none" style="margin: auto;">
      <ion-spinner name="circular" color="primary" style="margin-right: 10px;"></ion-spinner>
      <ion-label>Clôture en cours...</ion-label>
    </ion-item>
  </ng-container>
</div>
