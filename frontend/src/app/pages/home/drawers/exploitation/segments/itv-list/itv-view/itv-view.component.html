<ng-container *ngIf="!isLoading; else loadingBody">
  <ion-accordion-group [multiple]="true" [value]="['general','blocks']">
    <ion-accordion value="general">
      <ion-item slot="header" color="light">
        <ion-label> Généralités </ion-label>
      </ion-item>

      <div slot="content">
        <ion-item lines="none">
          <ion-label>
            {{ itv.itvFilename }}
          </ion-label>
        </ion-item>
        <ion-item lines="none">
          <ion-label>
            {{ itv.itvDcre | date: 'dd/MM/yyyy' }}
          </ion-label>
        </ion-item>
        <ion-item lines="none">
          <ion-label>
            {{ itv.listItvBlock.length }} tronçons
          </ion-label>
        </ion-item>
      </div>
    </ion-accordion>
  </ion-accordion-group>

  <ion-item>
    <ion-label>Tronçons inspectés</ion-label>
  </ion-item>

  <ion-content class="block-list" scrollbar [scrollbar]="onCustomScrollBarStyle()" allowAllScreens='true'>
    <ion-list lines="none">
      <ion-item-group *ngFor="let itvBlock of itv.listItvBlock; let i = index">
        <ion-item class="ion-text-center">
          <ion-label>
            <div class="block-header">
              <span style="font-weight: bold">Tronçon {{ i + 1 }}</span>
              <div class="itv-defects">
                <div *ngIf="itvBlock.itbObservation === true" class="circle O">O</div>
                <div *ngIf="itvBlock.itbStructuralDefect === true" class="circle S">S</div>
                <div *ngIf="itvBlock.itbFunctionalDefect === true" class="circle F">F</div>
              </div>
            </div>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <p>{{ itvBlock.address }} {{ itvBlock.city }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <p>Noeud de départ : {{ itvBlock.startNodeId }}</p>
            <p *ngIf="itvBlock.endNodeId != null">Noeud d'arrivée : {{ itvBlock.endNodeId }}</p>
          </ion-label>
        </ion-item>
      </ion-item-group>
    </ion-list>
  </ion-content>
</ng-container>

<ng-template #loadingBody>
  <ion-item lines="none" class="skeleton-label">
    <ion-skeleton-text [animated]="true" style="width: 50%;"></ion-skeleton-text>
  </ion-item>
  <ion-item lines="none" class="skeleton-label">
    <ion-skeleton-text [animated]="true" style="width: 50%;"></ion-skeleton-text>
  </ion-item>
  <ion-item lines="none" class="skeleton-label">
    <ion-skeleton-text [animated]="true" style="width: 50%;"></ion-skeleton-text>
  </ion-item>
  <app-skeleton-loading [rows]="8"></app-skeleton-loading>
</ng-template>