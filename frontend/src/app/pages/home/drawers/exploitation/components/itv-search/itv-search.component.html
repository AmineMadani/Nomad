<ion-accordion-group #accordionGroup value="filterForm">
  <ion-accordion value="filterForm">
    <ion-item slot="header" color="light" lines="full">
      <ion-icon slot="start" [name]="'' ? 'filter-circle-outline':'filter-outline'"></ion-icon>
      <ion-label>Filtrer les ITVs</ion-label>
    </ion-item>
    <div slot="content" class="intervention-filter">
      <ng-container *ngIf="searchForm">
        <ion-list [formGroup]="searchForm">
          <ng-container *ngIf="!referentialLoading; else loading">
            <div class="search-line">
              <app-search-select [key]="'id'" [label]="'Liste des contrats'" [elements]="displayedContracts"
                [control]="searchForm.controls['contractIds']" [elementLabelFunction]="getContractLabel"
                [isMultiSelection]="true">
              </app-search-select>
              <app-search-select class="select-search" [key]="'id'" [label]="'Liste des communes'"
                [elements]="displayedCities" [control]="searchForm.controls['cityIds']"
                [elementLabelFunction]="getCityLabel" [isMultiSelection]="true">
              </app-search-select>
            </div>
          </ng-container>
          <ng-template #loading>
            <div class="search-line">
              <ion-skeleton-text [animated]="true" style="width: 45%; height: 52px;"></ion-skeleton-text>
              <ion-skeleton-text [animated]="true" style="width: 45%; height: 52px;"></ion-skeleton-text>
            </div>
          </ng-template>

          <div class="search-line">
            <ion-select labelPlacement="floating" fill="outline" cancelText="Annuler" label="Statut(s)"
              [interface]="isMobile ? 'action-sheet' : 'popover'" formControlName="status" [multiple]="true">
              <ion-select-option value="imported">Importé</ion-select-option>
              <ion-select-option value="ongoing">En cours</ion-select-option>
            </ion-select>

            <ion-select labelPlacement="floating" fill="outline" cancelText="Annuler" label="Défaut(s)"
              [interface]="isMobile ? 'action-sheet' : 'popover'" formControlName="failure" [multiple]="true">
              <ion-select-option value="O">Observations</ion-select-option>
              <ion-select-option value="F">Structurels</ion-select-option>
              <ion-select-option value="S">Fonctionnels</ion-select-option>
            </ion-select>
          </div>

          <div class="search-calendar">
            <ion-input aria-label="date" labelPlacement="floating" fill="outline" label="Date début "
              placeholder="Début" formControlName="startDate" (keydown)="onDateKeyDown($event)"
              (keyup)="onDateKeyUp($event)"></ion-input>
            <ion-input aria-label="date" labelPlacement="floating" fill="outline" label="Date fin " placeholder="Fin"
              formControlName="endDate" (keydown)="onDateKeyDown($event)" (keyup)="onDateKeyUp($event)"></ion-input>
            <ion-button fill="clear" slot="end" color="primary" (click)="openCalendar()">
              <ion-icon name="calendar-outline" slot="icon-only"></ion-icon>
            </ion-button>
          </div>
        </ion-list>
      </ng-container>
      <hr class="solid">
    </div>
  </ion-accordion>
</ion-accordion-group>