<ion-item-group *ngFor="let feature of features; trackBy: trackByFn" class="highlightItem"
  [class.feature-hovered]="featureHovered?.toString() === feature.id?.toString()" (mouseenter)="highlightFeature(feature)"
  [id]="'feature-' + feature.id" (mouseleave)="highlightFeature(undefined)" (click)="openFeature(feature)">
  <ng-container *ngIf="feature">
    <ion-item lines="none" color="none">
      <ion-icon slot="start" name="attach-outline"></ion-icon>
      <ion-label>
        <ion-label class="ion-no-margin">
          <ng-template #defaultTitle>
            Title
          </ng-template>

          <ng-container [ngTemplateOutlet]="titleTemplateRef || defaultTitle"
            [ngTemplateOutletContext]="{ $implicit: feature }"></ng-container>
        </ion-label>
        <ion-note slot="helperText">
          <ng-template #defaultSubtitle>
            Subtitle
          </ng-template>

          <ng-container [ngTemplateOutlet]="subtitleTemplateRef || defaultSubtitle"
            [ngTemplateOutletContext]="{ $implicit: feature }"></ng-container>
        </ion-note>
      </ion-label>
    </ion-item>
    <ion-item lines="none" class="date-item" color="none">
      <ion-label class="intervention-date ion-no-margin">
        <ng-template #defaultLabel>
          Label
        </ng-template>

        <ng-container [ngTemplateOutlet]="labelTemplateRef || defaultLabel"
          [ngTemplateOutletContext]="{ $implicit: feature }"></ng-container>
      </ion-label>
    </ion-item>
    <ion-item lines="none" color="none">
      <ng-template #defaultChip>
        <ion-chip class="status" [outline]="true">
          <ion-icon name="calendar-outline"></ion-icon>
          <ion-label>Urgent</ion-label>
        </ion-chip>
      </ng-template>

      <ng-container [ngTemplateOutlet]="chipTemplateRef || defaultChip"
        [ngTemplateOutletContext]="{ $implicit: feature }"></ng-container>
    </ion-item>
  </ng-container>
</ion-item-group>
<ng-container *ngIf="isLoading">
  <ion-item-group *ngFor="let feature of [1,2,3]">
    <ion-item lines="none" color="none">
      <ion-label>
        <ion-label class="ion-no-margin">
          <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
        </ion-label>
        <ion-note slot="helperText">
          <ion-skeleton-text [animated]="true" style="width: 50%;"></ion-skeleton-text>
        </ion-note>
      </ion-label>
      <ion-button slot="end" fill="clear">
        <ion-icon slot="icon-only" name="chevron-forward-outline">
        </ion-icon>
      </ion-button>
    </ion-item>
    <ion-item lines="none" class="date-item" color="none">
      <ion-label class="intervention-date ion-no-margin">
        <ion-skeleton-text [animated]="true" style="width: 20%;"></ion-skeleton-text>
      </ion-label>
    </ion-item>
    <ion-item lines="none" color="none">
      <ion-thumbnail slot="start" style="width:50px;height:20px">
        <ion-skeleton-text [animated]="true"></ion-skeleton-text>
      </ion-thumbnail>
    </ion-item>
  </ion-item-group>
</ng-container>
<ion-infinite-scroll (ionInfinite)="onIonInfinite($event)" [disabled]="fromCache">
  <ion-infinite-scroll-content loadingSpinner="bubbles">
  </ion-infinite-scroll-content>
</ion-infinite-scroll>