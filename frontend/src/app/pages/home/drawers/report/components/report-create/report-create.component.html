<ion-item lines="none">
  <ion-button *ngIf="!isMobile" fill="clear" slot="start" (click)="onDrawerBack()">
    <ion-icon size="small" slot="icon-only" name="arrow-back"></ion-icon>
  </ion-button>
  <ion-label class="header-label">Compte-rendu</ion-label>
  <ion-icon size="small" slot="end" name="close-outline" (click)="onClose()"></ion-icon>
</ion-item>

<div class="filter-content">
  <app-report-stepper [step]="step"></app-report-stepper>
  <ng-container *ngIf="step == 1">
    <app-report-asset [workorder]="workorder" [selectedTask]="selectedTask" (onSelectedTaskChange)="onSelectedTaskChange($event)" (onSaveWorkOrderState)="onSaveWorkOrderState()"></app-report-asset>
  </ng-container>
  <ng-container *ngIf="step == 2">
    <app-report-context [task]="selectedTask" (onSaveWorkOrderState)="onSaveWorkOrderState()"></app-report-context>
  </ng-container>
  <ng-container *ngIf="step == 3">
    <app-report-form [task]="selectedTask" (onSaveWorkOrderState)="onSaveWorkOrderState()"></app-report-form>
  </ng-container>
</div>

<div class="report-footer-actions" lines="none">
  <ion-button *ngIf="step >= 2" fill="clear" style="float: left;" (click)="onBack()">Précèdent</ion-button>
  <ion-button *ngIf="(step == 1 && selectedTask) || (step == 2 && selectedTask.wtrId) || step == 3" fill="clear" style="float: right;" (click)="onNext()">Suivant</ion-button>
</div>