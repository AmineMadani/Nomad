<ion-item lines="none">
  <ion-button *ngIf="!isMobile" fill="clear" slot="start" (click)="onDrawerBack()">
    <ion-icon size="small" slot="icon-only" name="arrow-back"></ion-icon>
  </ion-button>
  <ion-label class="header-label">Compte-rendu</ion-label>
  <ion-icon size="small" slot="end" name="close-outline" (click)="onClose()"></ion-icon>
</ion-item>

<div class="filter-content">
  <app-report-stepper [step]="step"></app-report-stepper>
  <ng-container *ngIf="workorder">
    <ion-accordion-group style="margin-top: 25px;">
      <ion-radio-group [allowEmptySelection]="true">
        <ion-item *ngFor="let tsk of workorder.tasks" slot="header">
          <ion-radio aria-label="radio" slot="start" mode="md" value="tsk.id" (click)="onSelectTask($event,tsk)"></ion-radio>
          <div style="display: inline-block;">
            <ion-label>
              <ion-label class="ion-no-margin">
                {{getLyrLabel(tsk.assObjTable)}}
              </ion-label>
              <ion-note slot="helperText">
                {{tsk.assObjRef}}
              </ion-note>
            </ion-label>
          </div>
          <ion-icon slot="end" color="primary" name="move-outline"></ion-icon>
          <ion-icon slot="end" color="primary" name="repeat-outline"></ion-icon>
        </ion-item>
      </ion-radio-group>
    </ion-accordion-group>
  </ng-container>
  <ng-container *ngIf="!workorder">
    <ion-accordion-group style="margin-top: 25px;">
      <ion-radio-group [allowEmptySelection]="true">
        <ion-accordion *ngFor="let tsk of [1,2,3,4]" [toggleIcon]="''" [disabled]="true">
          <ion-item slot="header">
            <ion-radio aria-label="radio" slot="start" mode="md" [disabled]="true"></ion-radio>
            <div style="display: inline-block;">
              <ion-label>
                <ion-label class="ion-no-margin">
                  <ion-skeleton-text [animated]="true" style="width: 100px;"></ion-skeleton-text>
                </ion-label>
                <ion-note slot="helperText">
                  <ion-skeleton-text [animated]="true" style="width: 50px;"></ion-skeleton-text>
                </ion-note>
              </ion-label>
            </div>
            <ion-icon slot="end" color="primary"></ion-icon>
          </ion-item>
          <div class="ion-action-padding" slot="content">
            <ion-item class="favorites-action" lines="none">
            </ion-item>
          </div>
        </ion-accordion>
      </ion-radio-group>
    </ion-accordion-group>
  </ng-container>
</div>

<div class="report-footer-actions" lines="none">
  <ion-button *ngIf="step >= 2" fill="clear" style="float: left;" (click)="onBack()">Précèdent</ion-button>
  <ion-button *ngIf="step <= 3 && currentTaskSelected" fill="clear" style="float: right;" (click)="onNext()">Suivant</ion-button>
</div>